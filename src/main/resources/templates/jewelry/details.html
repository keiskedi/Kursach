<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–î–µ—Ç–∞–ª—ñ –ø—Ä–∏–∫—Ä–∞—Å–∏</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
        }

        .jewelry-details {
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 10px;
        }

        .jewelry-details img {
            max-width: 300px;
            margin-bottom: 10px;
        }

        .comments {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid #aaa;
        }

        .comment {
            background-color: #f3f3f3;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 6px;
        }

        .comment-form {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<h1 th:text="${jewelry.name}">–ù–∞–∑–≤–∞ –ø—Ä–∏–∫—Ä–∞—Å–∏</h1>

<div style="margin-bottom: 20px;">
    <a th:href="@{/}" style="text-decoration: none; font-weight: bold; font-size: 16px;">‚¨ÖÔ∏è –ù–∞ –≥–æ–ª–æ–≤–Ω—É</a>
</div>
<div class="jewelry-details">
    <img th:src="@{${jewelry.imageUrl}}" alt="–§–æ—Ç–æ –ø—Ä–∏–∫—Ä–∞—Å–∏"/>
    <p><strong>–û–ø–∏—Å:</strong> <span th:text="${jewelry.description}">–û–ø–∏—Å</span></p>
    <p><strong>–¶—ñ–Ω–∞:</strong> <span th:text="${jewelry.price} + ' –≥—Ä–Ω'">1000 –≥—Ä–Ω</span></p>
</div>
<div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
    <div th:each="img : ${jewelry.images}">
        <img th:src="@{${img.url}}" alt="–§–æ—Ç–æ" style="width: 200px; height: auto; border-radius: 6px;"/>
    </div>
</div>
<div class="comments">
    <h2>üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ:</h2>

    <div th:if="${comments != null and !comments.isEmpty()}">
        <div th:each="comment : ${comments}" class="comment">
            <p th:text="${comment.text}">–¢–µ–∫—Å—Ç –∫–æ–º–µ–Ω—Ç–∞—Ä—è</p>
            <small th:text="'–ê–≤—Ç–æ—Ä: ' + ${comment.authorName}">–ê–≤—Ç–æ—Ä</small>
        </div>
    </div>
    <p th:if="${comments == null or comments.isEmpty()}">–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –ø–æ–∫–∏ –Ω–µ–º–∞—î.</p>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ -->
    <div class="comment-form" th:if="${#authentication?.name != 'anonymousUser'}">
        <form th:action="@{'/jewelry/' + ${jewelry.id} + '/comment'}" method="post" th:object="${comment}">
            <textarea th:field="*{text}" placeholder="–ó–∞–ª–∏—à—Ç–µ –∫–æ–º–µ–Ω—Ç–∞—Ä..." rows="3" cols="40" required></textarea><br/>
            <button type="submit">–î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä</button>
        </form>
    </div>
</div>

<!-- –ö–æ—à–∏–∫ -->
<div th:if="${#authentication?.name != 'anonymousUser'}">
    <form th:action="@{'/cart/add/' + ${jewelry.id}}" method="post">
        <button type="submit">üõí –î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫</button>
    </form>
</div>
<div th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
    <form th:action="@{'/admin/delete-jewelry/' + ${jewelry.id}}" method="get" style="margin-top: 20px;">
        <button type="submit" onclick="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü—é –ø—Ä–∏–∫—Ä–∞—Å—É?')">üóë –í–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–∏–∫—Ä–∞—Å—É</button>
    </form>
</div>
</body>
</html>
